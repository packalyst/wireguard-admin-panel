# ===========================================
# SERVER - Your VPS/Server Configuration
# ===========================================
SERVER_IP=YOUR_SERVER_IP                    # Public IP of your server (used by Headscale, WireGuard, DERP)

# ===========================================
# PORTS - External Service Ports
# ===========================================
HTTP_PORT=80                                 # Traefik HTTP entrypoint
HTTPS_PORT=443                               # Traefik HTTPS entrypoint
TRAEFIK_PORT=8080                            # Traefik dashboard/API
API_PORT=8081                                # Unified API service
ADGUARD_PORT=8083                            # AdGuard Home web UI
HEADSCALE_INTERNAL_PORT=8085                 # Headscale API (internal only, proxied)
STUN_PORT=3478                               # DERP/STUN for NAT traversal
WG_PORT=51820                                # WireGuard UDP port
DNS_PORT=53                                  # AdGuard DNS server

# ===========================================
# WIREGUARD - Manual VPN Peers
# ===========================================
WG_INTERFACE=wg0                             # WireGuard interface name
WG_IP_RANGE=10.8.0.0/16                      # IP range for WireGuard peers (must NOT overlap with Tailscale's 100.64.0.0/10)
WG_SERVER_IP=10.8.0.1                        # WireGuard server IP (gateway)
WG_DNS=10.8.0.1                              # DNS server for WireGuard peers

# ===========================================
# HEADSCALE - Tailscale Control Plane
# ===========================================
HEADSCALE_IP_RANGE=100.64.0.0/16             # IP range for Headscale/Tailscale clients
HEADSCALE_IP_RANGE_V6=fd7a:115c:a1e0::/48    # IPv6 range for Headscale clients
HEADSCALE_BASE_DOMAIN=vpn.local              # DNS base domain (used for AdGuard rewrites)
HEADSCALE_METRICS_PORT=9090                  # Headscale metrics endpoint
HEADSCALE_GRPC_PORT=50443                    # Headscale gRPC endpoint

# ===========================================
# DERP - Relay Server
# ===========================================
DERP_REGION_ID=900                           # DERP region ID (arbitrary, just unique)
DERP_REGION_CODE=self                        # DERP region code
DERP_REGION_NAME="Self-Hosted DERP"          # DERP region display name
DERP_HTTP_PORT=8443                          # Direct DERP port (bypasses Traefik for IP-only setups)

# ===========================================
# DNS - Upstream DNS Servers
# ===========================================
UPSTREAM_DNS_1=1.1.1.1                       # Cloudflare DNS
UPSTREAM_DNS_2=8.8.8.8                       # Google DNS
UPSTREAM_DNS_3=9.9.9.9                       # Quad9 DNS (used by Headscale)
UPSTREAM_DNS_DOH_1=https://dns.cloudflare.com/dns-query   # Cloudflare DoH
UPSTREAM_DNS_DOH_2=https://dns.google/dns-query           # Google DoH

# ===========================================
# ADGUARD - DNS Filtering
# ===========================================
ADGUARD_USER=admin                           # AdGuard admin username
ADGUARD_PASS_HASH=YOUR_BCRYPT_HASH_HERE  # Generate with: htpasswd -nbB admin yourpassword | cut -d: -f2
ADGUARD_PPROF_PORT=6060                      # AdGuard profiling port (disabled by default)

# ===========================================
# ADMIN PANEL - Custom Domain
# ===========================================
ADMIN_DOMAIN=manage.me                       # Custom domain for admin panel (VPN only)

# ===========================================
# NETWORK RANGES - Private/Internal Networks
# ===========================================
# These are ignored by firewall (not blocked) and allowed in VPN-only middleware
IGNORE_NETWORKS=127.0.0.1/8,100.64.0.0/10,172.16.0.0/12,10.0.0.0/8,192.168.0.0/16

# ===========================================
# VPN ROUTER - Cross-network routing (optional)
# ===========================================
# Enables WireGuard and Headscale clients to communicate
VPN_ROUTER_NAME=vpn-router                   # Container and hostname for VPN router
VPN_ROUTER_IMAGE=tailscale/tailscale:latest  # Docker image for VPN router
VPN_ROUTER_DATA=/var/lib/tailscale-vpn-router # Host path for router state
HEADSCALE_ACL_PATH=/headscale/config/acl.json # Path to Headscale ACL file
NFTABLES_ACL_PATH=/etc/nftables.d/vpn-acl.nft # Path to nftables ACL rules

# ===========================================
# DOCKER NETWORK - Static Container IPs
# ===========================================
DOCKER_SUBNET=172.18.0.0/24
DOCKER_GATEWAY=172.18.0.1
TRAEFIK_CONTAINER_IP=172.18.0.2
HEADSCALE_CONTAINER_IP=172.18.0.3
UI_CONTAINER_IP=172.18.0.4

# ===========================================
# INTERNAL URLs - Service Communication
# ===========================================
TRAEFIK_API=http://172.18.0.2:8080/api       # Traefik API URL

# ===========================================
# SECURITY
# ===========================================
# REQUIRED: Generate with: openssl rand -hex 32
ENCRYPTION_SECRET=

# ===========================================
# RATE LIMITING
# ===========================================
RATE_LIMIT_AVERAGE=100                       # Requests per second (normal)
RATE_LIMIT_BURST=200                         # Burst capacity (normal)
RATE_LIMIT_STRICT_AVERAGE=10                 # Requests per second (sensitive APIs)
RATE_LIMIT_STRICT_BURST=20                   # Burst capacity (sensitive APIs)

# ===========================================
